{
   "apiVersion": "v1",
   "items": [
      {
         "apiVersion": "extensions/v1beta1",
         "kind": "DaemonSet",
         "metadata": {
            "labels": {
               "addonmanager.kubernetes.io/mode": "Reconcile",
               "k8s-app": "fluentd-es",
               "kubernetes.io/cluster-service": "true",
               "version": "v1.22"
            },
            "name": "fluentd-es-v1.22",
            "namespace": "elasticsearch"
         },
         "spec": {
            "template": {
               "metadata": {
                  "annotations": {
                     "scheduler.alpha.kubernetes.io/critical-pod": ""
                  },
                  "labels": {
                     "k8s-app": "fluentd-es",
                     "kubernetes.io/cluster-service": "true",
                     "version": "v1.22"
                  }
               },
               "spec": {
                  "containers": [
                     {
                        "command": [
                           "/bin/sh",
                           "-c",
                           "/usr/sbin/td-agent 2>&1 >> /var/log/fluentd.log"
                        ],
                        "image": "gcr.io/google_containers/fluentd-elasticsearch:1.22",
                        "name": "fluentd-es",
                        "resources": {
                           "limits": {
                              "memory": "200Mi"
                           },
                           "requests": {
                              "cpu": "100m",
                              "memory": "200Mi"
                           }
                        },
                        "volumeMounts": [
                           {
                              "mountPath": "/var/log",
                              "name": "varlog",
                              "readOnly": false
                           },
                           {
                              "mountPath": "/var/lib/docker/containers",
                              "name": "varlibdockercontainers",
                              "readOnly": true
                           }
                        ]
                     }
                  ],
                  "nodeSelector": {
                     "beta.kubernetes.io/fluentd-ds-ready": "true"
                  },
                  "serviceAccountName": "fluentd-serviceaccount",
                  "terminationGracePeriodSeconds": 30,
                  "volumes": [
                     {
                        "hostPath": {
                           "path": "/var/log"
                        },
                        "name": "varlog"
                     },
                     {
                        "hostPath": {
                           "path": "/var/lib/docker/containers"
                        },
                        "name": "varlibdockercontainers"
                     }
                  ]
               }
            }
         }
      },
      {
         "apiVersion": "v1",
         "kind": "ServiceAccount",
         "metadata": {
            "name": "fluentd-serviceaccount",
            "namespace": "elasticsearch"
         }
      },
      {
         "apiVersion": "rbac.authorization.k8s.io/v1beta1",
         "kind": "ClusterRole",
         "metadata": {
            "name": "fluentd-serviceaccount",
            "namespace": "elasticsearch"
         },
         "rules": [
            {
               "apiGroups": [
                  "*"
               ],
               "resources": [
                  "pods",
                  "nodes"
               ],
               "verbs": [
                  "list",
                  "watch"
               ]
            }
         ]
      },
      {
         "apiVersion": "rbac.authorization.k8s.io/v1beta1",
         "kind": "ClusterRoleBinding",
         "metadata": {
            "name": "fluentd-serviceaccount",
            "namespace": "elasticsearch"
         },
         "roleRef": {
            "apiGroup": "rbac.authorization.k8s.io",
            "kind": "ClusterRole",
            "name": "fluentd-serviceaccount"
         },
         "subjects": [
            {
               "kind": "ServiceAccount",
               "name": "fluentd-serviceaccount",
               "namespace": "elasticsearch"
            }
         ]
      }
   ],
   "kind": "List"
}
